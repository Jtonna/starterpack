<behavior name="commit-discipline" version="1">

  <description>
    Rules for commit message format, granularity, and file inclusion.
    Every agent that creates commits must follow these rules.
  </description>

  <applies-to>implementer, light-implementer, doc-writer, submitter</applies-to>

  <rules>
    <rule>
      Every commit message starts with the ticket ID being worked (discover prefix from beads, never guess).
      In FEATURE_BRANCHING, use the child ticket ID, not the epic ID. The epic branch name
      already ties everything together.
    </rule>
    <rule>Commits must be granular — one logical change per commit</rule>
    <rule>Multiple commits per sub-task are expected</rule>
    <rule>Each commit must be atomic and independently valid (builds, no broken imports)</rule>
    <rule>Never commit secrets, .env files, or credentials</rule>
    <rule>Always include .beads/ files (especially .beads/issues.jsonl) in commits — the pre-commit hook stages them automatically, but verify they are included before pushing</rule>
    <rule>Always verify the build passes before the final commit of a task</rule>
  </rules>

</behavior>
