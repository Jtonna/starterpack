<catalog>

  <overview>
    Bootstrap index for the starterpack workflow system. The orchestrator reads this file
    at session start to discover all lifecycle phases, composable behaviors, and configuration.

    Architecture (inspired by AGORA):
    - Lifecycle files define WHEN things happen (phases, gates, handoffs)
    - Behavior files define WHAT agents can do (composable, standalone capabilities)
    - Config files define infrastructure (model tiers, issue tracker, agent teams)

    Agents do not have predefined rigid roles. The orchestrator composes agent instructions
    by loading the lifecycle phase context + the behavior files relevant to that agent's role.
  </overview>

  <lifecycle>
    <phase name="ENTRY"          file=".starterpack/lifecycle/entry.xml"          description="Entry point routing, branching strategy selection" />
    <phase name="PLANNING"       file=".starterpack/lifecycle/planning.xml"       description="Planning loop: intake, draft, review, human gate" />
    <phase name="IMPLEMENTATION" file=".starterpack/lifecycle/implementation.xml" description="Implementation loop: dispatch, monitor, evaluate, human gate" />
    <phase name="DOCS"           file=".starterpack/lifecycle/docs.xml"           description="Documentation audit loop: scout, audit, human gate, apply" />
    <phase name="PR"             file=".starterpack/lifecycle/pr.xml"             description="PR loop: prepare, human gate, submit" />
  </lifecycle>

  <behaviors>
    <behavior name="commit-discipline"       file=".starterpack/behaviors/commit-discipline.xml"
              description="Commit message format, granularity rules, .beads file inclusion"
              used-by="implementer, light-implementer, doc-writer, submitter" />
    <behavior name="escalation"              file=".starterpack/behaviors/escalation.xml"
              description="Failure protocol: retry, structured report, escalation chain"
              used-by="implementer, light-implementer, doc-writer, submitter, explorer, planner, plan-reviewer, doc-scout, doc-auditor, pr-drafter" />
    <behavior name="scope-enforcement"       file=".starterpack/behaviors/scope-enforcement.xml"
              description="File scope limits, out-of-scope discovery and reporting protocol"
              used-by="implementer, light-implementer, orchestrator" />
    <behavior name="sub-task-tracking"       file=".starterpack/behaviors/sub-task-tracking.xml"
              description="Post and update sub-task progress as ticket comments"
              used-by="orchestrator" />
    <behavior name="documentation-structure" file=".starterpack/behaviors/documentation-structure.xml"
              description="Documentation model: single-project, monorepo layouts, principles"
              used-by="doc-scout, doc-auditor, doc-writer" />
    <behavior name="pr-template"             file=".starterpack/behaviors/pr-template.xml"
              description="Pull request body template: summary, changes table, testing plan"
              used-by="pr-drafter" />
    <behavior name="branching"               file=".starterpack/behaviors/branching.xml"
              description="Branch naming conventions, trunk-based vs feature-branching rules"
              used-by="orchestrator, submitter" />
  </behaviors>

  <config>
    <file name="models"      path=".starterpack/config/models.xml"      description="Model tiers, role definitions, dispatch overrides" />
    <file name="beads"       path=".starterpack/config/beads.xml"       description="Issue tracker: initialization, prefix management, commands, issue types" />
    <file name="agent-teams" path=".starterpack/config/agent-teams.xml" description="Agent Teams prerequisites, constraints, usage rules" />
  </config>

  <composition-rules>
    <!--
      How the orchestrator assembles instructions for dispatched agents:

      1. Read this catalog at session start to discover all available files
      2. When entering a lifecycle phase, read the phase's lifecycle file
      3. The lifecycle file declares <requires-behavior> tags listing needed behaviors
      4. Look up the agent's role in .starterpack/config/models.xml for tier and escalation path
      5. Match the lifecycle's required behaviors against the catalog's used-by attributes
      6. Load each matching behavior file and include its content in the agent's instructions
      7. The agent receives: phase context + behavior definitions + task-specific details

      To add a new behavior:
      1. Create a new file in .starterpack/behaviors/
      2. Add an entry to this catalog with used-by listing the applicable roles
      3. Add <requires-behavior> to the lifecycle files where the behavior applies
      No other files need to change.
    -->
  </composition-rules>

</catalog>
